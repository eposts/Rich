<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>第十章 : make的隐含规则</title>
<style>
<!--
h1
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	page-break-after:avoid;
	tab-stops:list 21.6pt;
	text-autospace:none;
	font-size:16.0pt;
	font-family:Arial;
	}
 p.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	text-autospace:none;
	font-size:10.0pt;
	font-family:"Times New Roman";
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
h2
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	page-break-after:avoid;
	tab-stops:list 28.8pt;
	text-autospace:none;
	font-size:12.0pt;
	font-family:Arial;
	font-weight:normal}
p.MsoBodyTextFirstIndent
	{margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	line-height:150%;
	text-autospace:none;
	font-size:10.5pt;
	font-family:Arial;
	margin-left:0pt; margin-right:0pt; margin-top:0pt}
h3
	{margin-top:12.0pt;
	margin-right:0pt;
	margin-bottom:12.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	page-break-after:avoid;
	tab-stops:list 36.0pt;
	text-autospace:none;
	font-size:12.0pt;
	font-family:Arial;
	font-weight:normal}
-->
</style>
</head>

<body>

<h1 align="center" style="text-align: center; text-indent: 0pt; margin-left: 9.9pt">
<a name="chapter_10"><span style="font-size: 18.0pt; font-family: 楷体_GB2312">
第十章：</span><span lang="EN-US" style="font-size: 18.0pt">make</span><span style="font-size: 18.0pt; font-family: 楷体_GB2312">的隐含规则</span></a></h1>
	<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: #222222">
	<hr size="1" width="100%" align="center">
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中重建一类目标的标准规则在很多场合需要用到。例如：根据</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件创建对应的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件，传统方式是使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">GNU
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“隐含规则”为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">提供了重建一类目标文件通用方法，不需要在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中明确地给出重建特定目标文件所需要的细节描述。例如：典型地；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的编译过程是由</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件编译生成</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">目标文件。当</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中出现一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件目标时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会使用这个通用的方式将后缀为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的文件编译称为目标的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另外，在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行时根据需要也可能是用多个隐含规则。比如：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">将从一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件生成对应的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件，最后再生成最终的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。就是说，只要目标文件名中除后缀以外其它部分相同，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">都能够使用若干个隐含规则来最终产生这个目标文件（当然最原始的那个文件必须存在）。例如；可以在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中这样来实现一个规则：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo 
: foo.h</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，只要在当前目录下存在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”这个文件，就可以生成“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可执行文件。本文前边的很多例子中已经使用到了隐含规则。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
内嵌的“隐含规则”在其所定义的命令行中，会使用到一些变量（通常也是内嵌变量）。我们可以通过改变这些变量的值来控制隐含规则命令的执行情况。例如：内嵌变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">CFLAGS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”代表了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">gcc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器编译源文件的编译选项，我们就可以在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中重新定义它，来改变编译源文件所要使用的参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
尽管我们不能改变</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">内嵌的隐含规则，但是我们可以使用模式规则重新定义自己的隐含规则，也可以使用后追规则来重新定义隐含规则。后缀规则存在某些限制（目前版本</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">保存它的原因是为了兼容以前版本）。使用模式规则更加清晰明了。</span></p>
</span>
<h2><a name="_gnu_make_10.1"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><span lang="EN-US" style="font-size: 14.0pt"><b>0.1 </b></span><span style="font-size: 14.0pt; font-family: 楷体_GB2312">
隐含规则的使用</span></a></h2>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">内嵌的隐含规则，在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中就不需要明确给出重建某一个目标的命令，甚至可以不需要规则。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会自动根据已存在（或者可以被创建）的源文件类型来启动相应的隐含规则。例如：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">foo : foo.o 
bar.o</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt; margin-left: 30.9pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">cc -o foo foo.o 
bar.o $(CFLAGS) $(LDFLAGS)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这里并没有给出重建文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的规则，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行这条规则时，无论文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”存在与否，都会试图根据隐含规则来重建这个文件（就是试图重新编译文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者其它类型的源文件）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行过程中找到的隐含规则，提供了此目标的基本依赖关系，确定了目标的依赖文件（通常是源文件，不包含对应的头文件依赖）和重建目标需要使用的命令行。隐含规则所提供的依赖文件只是一个最基本的（通常它们之间的对应关系为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">EXENAME.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”对应“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">EXENAME.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">EXENAME</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”对应于“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">EXENAME.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）。当需要增加这个目标的依赖文件时，要在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用没有命令行的规则给出。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
每一个内嵌的隐含规则中都存在一个目标模式和依赖模式，而且同一个目标模式可以对应多个依赖模式。例如：一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的目标可以由</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器编译对应的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件得到、</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的源文件得到，等等。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会根据不同的源文件来使用不同的编译器。对于“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”就是用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译，对于“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”就使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器编译。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
上边提到，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会自动根据已存在（或者可以被创建）的源文件类型来启动相应的隐含规则。这里的“可被创建”文件是指：这个文件在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中被作为目标或者依赖明确的提及，或者可以根据已存在的文件使用其它的隐含规则来创建它。当一个隐含规则的目标是另外一个隐含规则的依赖时，我们称它们是一个隐含规则链。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
通常，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会对那些没有命令行的规则、</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">双冒号规则</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">寻找一个隐含规则来执行。作为一个规则的依赖文件，在没有一个规则明确描述它的依赖关系的情况下；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会将其作为一个目标并为它搜索一个隐含规则，试图重建它。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
注意：给目标文件指定明确的依赖文件并不会影响隐含规则的搜索。我们来看一个例子：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">foo.o: foo.p</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这个规则指定了“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的依赖文件是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。但是如果在工作目录下存在同名</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的结果就不是用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">pc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来生成“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，而是用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来生成目标文件。这是因为在隐含规则列表中对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的隐含规则处于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件隐含规则之前。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当需要给目标指定明确的重建规则时，规则描述中就不能省略命令行，这个规则必须提供明确的重建命令来说明目标需要重建所需要的动作。为了能够在存在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的情况下编译“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。规则可以这样写：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">foo.o: foo.p</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt; margin-left: 30.9pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">pc $&lt; -o $@</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这一点在多语言实现的工程编译中，需要特别注意！否则编译出来的可能就不是你想要得程序。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另外：当我们不想让</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">为一个没有命令行的规则中的目标搜索隐含规则时，我们需要使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">空命令</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">来实现。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
最后让我们来看一个简单的例子，之前在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">目标指定变量</span>
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一节的例子我们就可以简化为：</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial"># sample 
Makefile</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">CUR_DIR = 
$(shell pwd)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">INCS := $(CUR_DIR)/include</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">CFLAGS := -Wall 
CI$(INCS)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">EXEF := foo bar</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">.PHONY : all 
clean</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">all : $(EXEF)</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">foo : CFLAGS+=-O2</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">bar : CFLAGS+=-g</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">clean :</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(RM) 
*.o *.d $(EXES)</span></i></b></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">
&nbsp;</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
例子中没有出现任何关于源文件的描述。所有剩余工作全部交给了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">去处理，它会自动寻找到相应规则并执行、最终完成目标文件的重建。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
隐含规则为我们提供了一个编译整个工程非常高效的手段，一个大的工程中毫无例外的会用到隐含规则。实际工作中，灵活运用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: black">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">所提供的隐含规则功能，可以大大提供效率。</span></p>
<h2><a name="_gnu_make_10.2"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.2<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>make</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">的隐含规则一览</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
本节罗列出了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GUN 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">常见的一些内嵌隐含规则，除非在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">有名确定义、或者使用命令行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-R</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”参数取消隐含规则，否则这些隐含规则将有效。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
需要说明的是：即使我们没有使用命令行参数“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中也并不是所有的这些隐含规则都被定义了。其实，很多的这些看似预定义的隐含规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行时，实际是用后缀规则来实现的；因此，它们依赖于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中的“后缀列表”（也就是目标</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SUFFIXES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的后缀列表）。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的默认后缀列表为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.out</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.ln</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.F</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.l</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.mod</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.sym</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.def</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.h</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.info</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.dvi</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.tex</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.texinfo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.texi</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">txinfo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.w</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.ch</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.web</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.sh</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.elc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">el</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。所有我们下边将提到的隐含规则，如果其依赖文件中某一个满足列表中列出的后缀，则是后缀规则。如果修改了可识别后缀列表，那么可能会是许多默认预定义的规则无效（因为一些后缀可能不会别识别）。以下是常用的一些隐含规则（对于不常见的隐含规则这里没有描述）：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
生成，执行命令为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CC) 
-c $(CPPFLAGS) $(CFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">C++</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
生成，执行命令为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CXX) 
-c $(CPPFLAGS) $(CFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。建议使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”作为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C++</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的后缀，而不是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”创建，执行命令时“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(PC) 
-c $(PFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">Fortran/Ratfor</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.F</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
生成，根据源文件后缀执行对应的命令：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;&nbsp;&nbsp;
</span>
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: blue">.f
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
―</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$(FC) 
Cc&nbsp; $(FFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;&nbsp;
</span>
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: blue">&nbsp;.F
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
―</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$(FC) 
Cc&nbsp; $(FFLAGS) $(CPPFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;&nbsp;
</span>
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: blue">&nbsp;.r
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
―</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$(FC) 
Cc&nbsp; $(FFLAGS) $(RFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
预处理</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">Fortran/Ratfor</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.F</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
生成。此规则只是转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Ratfor</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">或有预处理的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Fortran</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序到一个标准的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Fortran</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序。根据源文件后缀执行对应的命令：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;&nbsp;&nbsp; 
.F </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
―</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$(FC) 
CF $(CPPFLAGS) $(FFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;&nbsp;&nbsp; 
.r </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
―</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$(FC) 
CF $(FFLAGS) $(RFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">Modula-2</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.sym</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.def</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
生成，执行的命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(M2C) 
$(M2FLAGS) $(DEFFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.mod</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成，执行的命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(M2C) 
$(M2FLAGS) $(MODFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
汇编和需要预处理的汇编程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”是不需要预处理的汇编源文件，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”是需要预处理的汇编源文件。汇编器为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">as</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
可自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成，执行命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(AS) 
$(ASFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
可由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">预编译器“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cpp</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，执行命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CPP) 
$(CPPFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
8.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">
链接单一的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">object</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">文件</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成，通过</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译器使用链接器（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GUN 
ld</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">），执行命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CC) 
$(LDFLAGS) N.o $(LOADLIBES) $(LDLIBS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
此规则仅适用：由一个源文件直接产生可执行文件的情况。当需要有多个源文件共同来创建一个可执行文件时，需要在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中增加隐含规则的依赖文件。例如：</span></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">x : y.o z.o</span></i></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">x.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">y.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">z.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”都存在时，规则执行如下命令：</span></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">cc -c x.c -o 
x.o</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">cc -c y.c -o 
y.o</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">cc -c z.c -o 
z.o</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">cc x.o y.o z.o 
-o x</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">rm -f x.o</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">rm -f y.o</span></i></b></p>
<p class="MsoNormal" style="margin-left:58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">rm -f z.o</span></i></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在复杂的场合，目标文件和源文件之间不存在向上边那样的名字对应关系时（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">x.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”对应，因此隐含规则在进行链接时，自动将“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">x.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”作为其依赖文件）。这时，需要在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中明确给出描述目标依赖关系的规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
通常，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">gcc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在编译源文件时（根据源文件的后缀名来启动相应的编译器），如果没有指定“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”选项，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">gcc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会在编译完成之后调用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ld</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”连接成为可执行文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
9.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Yacc C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，执行的命令：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(YACC) 
$(YFALGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”是一个语法分析工具）</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<b><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
10.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp; </span>Lex C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: blue">程序时的隐含规则。</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”自动由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.l</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，执行的命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(LEX) 
$(LFALGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。（关于“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Lex</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的细节请查看相关资料）</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: #3366FF">
这里没有列出所有的隐含规则，仅列出我个人在实际工作中涉及到的。没有涉及的很难对英文文档进行深入地说明和理解。如果那些没有提到的各位有所使用，或者能够详细的描述可以添加到这个文档中！</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在隐含规则中，命令行中的实际命令是使用一个变量计算得到，诸如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">COMPILE.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">LINK.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（这个在前面也看到过）和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">PREPROCESS.S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”等。这些变量被展开之后就是对应的命令（包括了命令行选项），例如：变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">COMPILE.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的定义为</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc 
-c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（如果</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中存在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CFLAGS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的定义，它的值会存在于这个变量中）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会根据默认的约定，使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">COMPILE.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来编译一个“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的文件。类似地使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">LINK.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来连接“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件；使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">PREPROCESS.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”对“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件进行预处理。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
每一个隐含规则在创建一个文件时都使用了变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">OUTPUT_OPTION</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行命令时根据命令行参数来决定它的值，当命令行中没有包含“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”选项时，它的值为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-o 
$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，否则为空。建议在规则的命令行中明确使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”选项执行输出文件路径。这是因为在编译一个多目录的工程时，如果我们的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">“</span>VPATH<span lang="EN-US" style="font-family: 楷体_GB2312">”指定搜索目录</span>
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
时，编译后的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件或者其它文件会出现在和源文件不同的目录中。在有些系统的编译器不接受命令行的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”参数，而</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中包含“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">VPAT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的情况时，输出文件可能会出现在错误的目录下。解决这个问题的方式就是将“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">OUTPUT_OPTION</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值赋为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">;mv 
$*.o $@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，其功能是将编译完成的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件改变为规则中的目标文件。</span></p>
<h2><a name="_gnu_make_10.3"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.3<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">隐含变量</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
内嵌隐含规则的命令中，所使用的变量都是预定义的变量。我们将这些变量称为“隐含变量”。这些变量允许对它进行修改：在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中、通过命令行参数或者设置系统环境变量的方式来对它进行重定义。无论是用那种方式，只要</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在运行时它的定义有效，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的隐含规则都会使用这些变量。当然，也可以使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-R</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">--no</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">C</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">builtin-variables</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”选项来取消所有的隐含变量（同时将取消了所有的隐含规则）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
例如，编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的隐含规则为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CC) 
-c $(CFLAGS) $(CPPFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。默认的编译命令是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，执行的命令是：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc 
Cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。我们可以同上述的任何一种方式将变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CC</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”定义为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ncc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，那么编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件所执行的命令将是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ncc 
-c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。同样我们可以对变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CFLAGS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”进行重定义。对这些变量重定义后如果需要整个工程的各个子目录有效，同样需要使用关键字“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">export</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”将他们导出；否则目录间编译命令可能出现不一致。编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件时，隐含规则使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CC)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来引用编译器；“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CFLAGS)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”引用编译选项。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
隐含规则中所使用的变量（隐含变量）分为两类：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
代表一个程序的名字（例如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CC</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”代表了编译器这个可执行程序）。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
代表执行这个程序使用的参数（例如：变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CFLAGS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”），多个参数使用空格分开。当然也允许在程序的名字中包含参数。但是这种方式建议不要使用。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
以下是一些作为程序名的隐含变量定义：</span></p>
<h3><a name="_gnu_make_10.3.1"><span lang="en-us">1</span><span lang="EN-US">0.3.1<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">代表命令的变量</span></a></h3>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
AR</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
函数库打包程序，可创建静态库</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文档。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ar</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
AS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
汇编程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">as</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CC</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CXX </span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
C++</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">g++</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CO</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
从</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
RCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中提取文件的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">co</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CPP</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序的预处理器（输出是标准输出设备）。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(CC) 
-E</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
FC</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
编译器和预处理</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Fortran
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
Ratfor </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
源文件的编译器。默认是“</span>f77<span lang="EN-US" style="font-family: 楷体_GB2312; font-size: 12.0pt; line-height: 150%; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
GET</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
从</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">SCCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中提取文件程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">get</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
LEX</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
将</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
Lex </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
语言转变为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
C </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
或</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
Ratfo </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">lex</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
PC</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">语言编译器。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">pc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
YACC</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文法分析器（针对于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序）。默认命令是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
YACCR</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文法分析器（针对于</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Ratfor</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序）。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">yacc 
-r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
MAKEINFO</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Texinfo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.texi</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Info</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">makeinfo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
TEX</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
从</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">TeX</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件创建</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">TeX 
DVI</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">tex</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
TEXI2DVI</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
从</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Texinfo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件创建</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">TeX 
DVI </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
文件的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">texi2dvi</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
WEAVE</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Web</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">TeX</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">weave</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CWEAVE</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C 
Web </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
TeX</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cweave</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
TANGLE</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Web</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">语言的程序。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">tangle</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CTANGLE</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
转换</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C 
Web </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ctangle</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
RM</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
删除命令。默认是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">rm 
-f</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<h3><a name="_gnu_make_10.3.2"><span lang="en-us">1</span><span lang="EN-US">0.3.2<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">命令参数的变量</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
下边的是代表命令执行参数的变量。如果没有给出默认值则默认值为空。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
ARFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">AR</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”命令的命令行参数。默认值是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">rv</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
ASFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行汇编语器“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">AS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的命令行参数（明确指定“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件时）。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CC</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译器的命令行参数（编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的选项）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CXXFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">g++</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译器的命令行参数（编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.cc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的选项）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
COFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">co</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的命令行参数（在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">RCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中提取文件的选项）。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
CPPFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">预处理器“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc 
-E</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的命令行参数（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">C
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
Fortran </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
编译器会用到）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
FFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Fortran</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">语言编译器“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">f77<span lang="EN-US" style="font-family: 楷体_GB2312">”执行的命令行参数（编译</span>Fortran</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的选项）。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
GFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
SCCS </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">get</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”程序参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
LDFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
链接器（如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ld</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
LFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Lex</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文法分析器参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
PFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">语言编译器参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
RFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Ratfor </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
程序的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Fortran
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
编译器参数。</span></p>
<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.1pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
<b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Arial; color: blue">
YFLAGS</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
Yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文法分析器参数。</span></p>
<h2><a name="_gnu_make_10.4"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.4<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>make</span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">隐含规则链</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
有时，一个目标文件需要多个（一系列）隐含规则来创建。例如：创建文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的过程可能是：首先执行“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，之后由编译器将“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译成为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。如果一个目标文件需要一系列隐含规则才能完成它的创建，我们就把这个系列称为一个“链”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
我们来看上边例子的执行过程。有两种情况：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”存在或者它在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中被提及，那就不需要进行其它搜索，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">处理的过程是：首先，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">可以确定出“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”创建；之后，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">试图使用隐含规则来重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。它会寻找“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”这个文件，如果“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”存在，则执行隐含规则来重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”这个文件。之后再由“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”；当不存在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件时，直接编译“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”生成“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”不存在也没有在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中提及的情况，只要存在“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”这个文件，那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">也会经过这两个步骤来重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
→</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
N.c </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
→</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）。这种情况下，文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”作为一个中间过程文件。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在执行规则时，如果需要一个中间文件才能完成目标的重建，那么这个文件将会自动地加入到依赖关系链中（和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中明确提及的目标作相同处理），并使用合适的隐含规则对它进行重建。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的中间过程文件和那些明确指定的文件在规则中的地位完全相同。但</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在处理时两者之间存在一些差异：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
第一：中间文件不存在时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">处理两者的方式不同。对于一个普通文件来说，因为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中有明确的提及，此文件可能是作为一个目标的依赖，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在执行它所在的规则前会试图重建它。但是对于中间文件，因为没有明确提及，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">不会去试图重建它。除非这个中间文件所依赖的文件（上例第二种情况中的文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">是中间过程文件）被更新。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
第二：如果</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在执行时需要用到一个中间过程文件，那么默认的动作将是：这个过程文件在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行结束后会被删除（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会在删除中间过程文件时打印出执行的命令以显示那些文件被删除了）。因此一个中间过程文件在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行结束后就不再存在了。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中明确提及的所有文件都不被作为中间过程文件来处理，这是缺省地。不过我们可以在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.INTERMEDIATE</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来指除将那些文件作为中间过程文件来处理（这些文件作为目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.INTERMEDIATE</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的依赖文件罗列），即使它们在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中被明确提及，这些作为特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.INTERMEDIATE</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”依赖的文件在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行结束之后会被自动删除。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另一方面，如果我们希望保留某些中间过程文件（它没有在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中被提及），不希望</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">结束时自动删除它们。可以在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用特使目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SECONDARY</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来指出这些文件（这些文件将被作为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">secondary</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件；需要保留的文件作为特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SECONDARY</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的依赖文件罗列）。注意：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">secondary</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件也同时被作为中间过程文件来对待。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
需要保留中间过程文件还存在另外一种实现方式。例如需要保留所有</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的中间过程文件，我们可以将</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的模式（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）作为特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.PRECIOUS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的依赖。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一个“链”可以包含两个以上隐含规则的调用过程。同一个隐含规则在一个“链”中只能出现一次。否则就会出现像“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”依赖“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”甚至“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o.o.o.o…</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”这样不合逻辑的情况发生。因为，如果允许在一个“链”中多次调用同一隐含规则（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N 
: N.o; $(LINK.o) $(LDFLAGS) N.o $(LOADLIBES) $(LDLIBS) </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
），将会导致</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">进入到无限的循环中去。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
隐含规则链中的某些隐含规则，在一些情况会被优化处理。例如：从文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”创建可执行文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，这一过程可以是：使用隐含规则将“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”编译生成“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件，之后再使用另一个隐含规则来完成对“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的链接，最后生成执行文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。这个过程中对源文件的编译和对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的链接分别使用了两个独立的规则（它们组成一个隐含规则链）。但是实际情况是，对源文件的编译和对</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的链接是在一个规则中完成的，规则使用命令“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">cc 
foo.c foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的隐含规则表中，所有可用的优化规则处于首选地位。</span></p>
<h2><a name="_gnu_make_10.5"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.5<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">模式规则</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
模式规则类似于普通规则。只是在模式规则中，目标名中需要包含有模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（一个），包含有模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的目标被用来匹配一个文件名，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可以匹配任何非空字符串。规则的依赖文件中同样可以使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，依赖文件中模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的取值情况由目标中的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来决定。例如：对于模式规则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.o 
: %.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，它表示的含义是：所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件依赖于对应的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。我们可以使用模式规则来定义隐含规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
要注意的是：模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的匹配和替换发生在规则中所有变量和函数引用展开之后，变量和函数的展开一般发生在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">读取</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">时（变量和函数的展开可参考</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
<span lang="EN-US"><span lang="EN-US" style="font-family: 楷体_GB2312">第五</span>
<span lang="EN-US" style="font-family: 楷体_GB2312">章</span>
<span lang="EN-US" style="font-family: 楷体_GB2312">使用变量</span> </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
和</span><span style="font-size: 12.0pt; line-height: 150%; color: black"> &nbsp;<span lang="EN-US"><span lang="EN-US" style="font-family: 楷体_GB2312">第七章</span> 
make<span lang="EN-US" style="font-family: 楷体_GB2312">的函数</span> </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
），而模式规则中的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的匹配和替换则发生在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行时。</span></p>
<h3><a name="_gnu_make_10.5.1"><span lang="en-us">1</span><span lang="EN-US">0.5.1<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">模式规则介绍</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在模式规则中，目标文件是一个带有模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的文件，使用模式来匹配目标文件。文件名中的模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可以匹配任何非空字符串，除模式字符以外的部分要求一致。例如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”匹配所有以“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”结尾的文件（匹配的文件名长度最少为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">3</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">个字母），“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">s%.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”匹配所有第一个字母为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，而且必须以“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”结尾的文件，文件名长度最小为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">5</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">个字符（模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”至少匹配一个字符）。在目标文件名中“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”匹配的部分称为“茎”（前面已经提到过，参考</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
<span lang="EN-US"><span lang="EN-US" style="font-family: 楷体_GB2312">静态模式</span>
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一节）。使用模式规则时，目标文件匹配之后得到“茎”，依赖根据“茎”产生对应的依赖文件，这个依赖文件必须是存在的或者可被创建的。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
因此，一个模式规则的格式为：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp; </span><b>
<i><span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.o : %.c ; 
COMMAND...</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这个模式规则指定了如何由文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来创建文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”应该是已存在的或者可被创建的。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
模式规则中依赖文件也可以不包含模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。当依赖文件名中不包含模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”时，其含义是所有符合目标模式的目标文件都依赖于一个指定的文件（例如：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.o 
: debug.h</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">，表示所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件都依赖于头文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">debug.h</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）。这样的模式规则在很多场合是非常有用的。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
同样一个模式规则可以存在多个目标。多目标的模式规则和普通多目标规则有些不同，普通多目标规则的处理是将每一个目标作为一个独立的规则来处理，所以多个目标就就对应多个独立的规则（这些规则各自有自己的命令行，各个规则的命令行可能相同）。但对于多目标模式规则来说，所有规则的目标共同拥有依赖文件和规则的命令行，当文件符合多个目标模式中的任何一个时，规则定义的命令就有可能将会执行；因为多个目标共同拥有规则的命令行，因此一次命令执行之后，规则不会再去检查是否需要重建符合其它模式的目标。看一个例子：</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">#sample 
Makefile</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">Objects = foo.o 
bar.o </span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">CFLAGS := -Wall</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%x : CFLAGS += 
-g</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.o : CFLAGS += 
-O2</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp; </span></i>
</b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.o %.x : %.c</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; $(CC) $(CFLAGS) 
$&lt; -o $@</span></i></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当在命令行中执行“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">make 
foo.o foo.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”时，会看到只有一个文件“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”被创建了，同时</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会提示“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">foo.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件是最新的（其实“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">foo.x</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”并没有被创建）。此过程表明了多目标的模式规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">处理时是被作为一个整体来处理的。这是多目标模式规则和多目标的普通规则的区别之处。大家不妨将上边的例子改为普通多目标规则试试看将会得到什么样的结果。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
最后需要说明的是：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
模式规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中的顺序需要注意，当一个目标文件同时符合多个目标模式时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">将会把第一个目标匹配的模式规则作为重建它的规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中明确指定的模式规则会覆盖隐含模式规则。就是说如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中出现了一个对目标文件合适可用的模式规则，那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">就不会再为这个目标文件寻找其它隐含规则，而直接使用在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中出现的这个规则。在使用时，明确规则永远优先于隐含规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另外，依赖文件存在或者被提及的规则，优先于那些需要使用隐含规则来创建其依赖文件的规则。</span></p>
<h3><a name="_gnu_make_10.5.2"><span lang="en-us">1</span><span lang="EN-US">0.5.2<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">模式规则示例</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
本小节来看一些使用模式规则的例子，这些模式规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中已经被预定义。首先看编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的隐含模式规则：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.o : %.c</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt; margin-left: 30.9pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">$(CC) -c $(CFLAGS) 
$(CPPFLAGS) $&lt; -o $@</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
此规则描述了一个</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件如何由对应的</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件创建。规则的命令行中使用了自动化变量“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，其中自动化变量“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”代表规则的依赖，“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”代表规则的目标。此规则在执行时，命令行中的自动化变量将根据实际的目标和依赖文件取对应值。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中第二个内嵌模式规则是：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">% :: RCS/%,v</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt; margin-left: 30.9pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">$(CO) $(COFLAGS) 
$&lt;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这个规则的含义是：任何一个文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">X</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”都可以由目录“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">RCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”下的相应文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">x.v</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来生成。规则的目标为“</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，它匹配任何文件名，因此只要存在相对应的依赖文件（</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">N.v</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">），目标（</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）都可被创建。双冒号表示该规则是最终规则，意味着规则的依赖文件不是中间过程文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另外，一个具有多目标的隐含规则是：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 41.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.tab.c %.tab.h: 
%.y</span></i></b></p>
<p class="MsoNormal" style="text-indent: 41.2pt; margin-left: 30.9pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">bison -d $&lt;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
它是一个多目标模式规则，关于多目标的特征可参考</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
<span lang="EN-US"><span lang="EN-US" style="font-family: 楷体_GB2312">模式规则介绍</span>
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一小节最后一个例子。</span></p>
<h3><a name="_gnu_make_10.5.3"><span lang="en-us">1</span><span lang="EN-US">0.5.3<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">自动化变量</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
模式规则中，规则的目标和依赖文件名代表了一类文件名；规则的命令是对所有这一类文件重建过程的描述，显然，在命令中不能出现具体的文件名，否则模式规则失去意义。那么在模式规则的命令行中该如何表示文件，将是本小节的讨论的重点。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
假如你需要书写一个将</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件编译到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的模式规则，那么你该如何为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">gcc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">书写正确的源文件名？当然了，不能使用任何具体的文件名，因为在每一次执行模式规则时源文件名都是不一样的。为了解决这个问题，就需要使用“自动环变量”，自动化变量的取值是根据具体所执行的规则来决定的，取决于所执行规则的目标和依赖文件名。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
下面对所有的自动化变量进行说明：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$@</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
表示规则的目标文件名。如果目标是一个文档文件（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Linux</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中，一般称</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件为文档文件，也称为静态库文件），那么它代表这个文档的文件名。在多目标模式规则中，它代表的是哪个触发规则被执行的目标文件名。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$%</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当规则的目标文件是一个静态库文件时，代表静态库的一个成员名。例如，规则的目标是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.a(bar.o)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，那么，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值就为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">bar.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。如果目标不是静态库文件，其值为空。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$&lt;</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
规则的第一个依赖文件名。如果是一个目标文件使用隐含规则来重建，则它代表由隐含规则加入的第一个依赖文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$?</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
所有比目标文件更新的依赖文件列表，空格分割。如果目标是静态库文件名，代表的是库成员（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$^</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
规则的所有依赖文件列表，使用空格分隔。如果目标是静态库文件，它所代表的只能是所有库成员（</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件）名。一个文件可重复的出现在目标的依赖中，变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$^</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”只记录它的一次引用情况。就是说变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$^</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”会去掉重复的依赖文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$+</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
类似“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$^</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，但是它保留了依赖文件中重复出现的文件。主要用在程序链接时库的交叉引用场合。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">$*</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在模式规则和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">静态模式规则</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中，代表“茎”。“茎”是目标模式中“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”所代表的部分（当文件名中存在目录时，“茎”也包含目录（斜杠之前）部分）。例如：文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir/a.foo.b</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，当目标的模式为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">a.%.b</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”时，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir/a.foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。“茎”对于构造相关文件名非常有用。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
自动化变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”需要两点说明：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 75.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings; color: black">
&Oslash;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
对于一个明确指定的规则来说不存在“茎”，这种情况下“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的含义发生改变。此时，如果目标文件名带有一个可识别的后缀，那么“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”表示文件中除后缀以外的部分。例如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值为：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，因为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">是一个可识别的文件后缀名。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GUN 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对明确规则的这种奇怪的处理行为是为了和其它版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">兼容。通常，在除静态规则和模式规则以外，明确指定目标文件的规则中应该避免使用这个变量。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 75.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; font-family: Wingdings; color: black">
&Oslash;<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当明确指定文件名的规则中目标文件名包含不可识别的后缀时，此变量为空。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
自动化变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$?</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”在显式规则中也是非常有用的，使用它规则可以指定只对更新以后的依赖文件进行操作。例如，静态库文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">libN.a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，它由一些</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件组成。这个规则实现了只将更新后的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件加入到库中：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp; </span><b>
<i><span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">lib: foo.o 
bar.o lose.o win.o</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.6pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang="SV" style="font-size: 12.0pt; font-family: Arial">ar r lib $?</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
以上罗列的自动量变量中。其中有四个在规则中代表文件名（</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">、</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">、</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">、</span><span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">$*</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）。而其它三个的在规则中代表一个文件名列表。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GUN 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中，还可以通过这七个自动化变量来获取一个完整文件名中的目录部分和具体文件名部分。在这些变量中加入“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">D</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">F</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”字符就形成了一系列变种的自动环变量。这些变量会出现在以前版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中，在当前版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中，可以使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">notdir</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”函数来实现同样的功能。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(@D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
表示目标文件的目录部分（不包括斜杠）。如果“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir/foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，那么“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(@D)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的值为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。如果“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”不存在斜杠，其值就是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（当前目录）。注意它和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">函数“</span>dir<span lang="EN-US" style="font-family: 楷体_GB2312">”</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的区别！</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(@F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
目标文件的完整文件名中除目录以外的部分（实际文件名）。如果“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">dir/foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，那么“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(@F)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”只就是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(@F)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”等价于函数“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(notdir 
$@)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(*D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(*F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
分别代表目标“茎”中的目录部分和文件名部分。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(%D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(%F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当以如“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">archive(member)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”形式静态库为目标时，分别表示库文件成员“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">member</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”名中的目录部分和文件名部分。它仅对这种形式的规则目标有效。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(&lt;D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(&lt;F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
分别表示规则中第一个依赖文件的目录部分和文件名部分。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(^D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(^F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
分别表示所有依赖文件的目录部分和文件部分（不存在同一文件）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(+D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(+F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
分别表示所有依赖文件的目录部分和文件部分（可存在重复文件）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(?D)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.1pt"><b>
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: blue">
$(?F)</span></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
分别表示被更新的依赖文件的目录部分和文件名部分。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在讨论自动化变量时，为了和普通变量（如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">CFLAGS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）区别，我们直接使用了“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的形式。这种形式仅仅是为了和普通变量进行区别，没有别的目的。其实对于自动环变量和普通变量一样，代表规则第一个依赖文件名的变量名实际上是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，我们完全可以使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$(&lt;)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来替代“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。但是在引用自动化变量时通常的做法是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$&lt;</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，因为自动化变量本身是一个特殊字符。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">
GUN make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">同时支持“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Sysv</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”特性，允许在规则的依赖列表中使用特殊的变量引用（一般的自动化变量只能在规则的命令行中被引用）“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$$@</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$$(@D)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$$(@F)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（注意：要使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">$$</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”），它们分别代表了“目标的完整文件名”、“目标文件名中的目录部分”和“目标的实际文件名部分”。这三个特殊的变量只能用在明确指定目标文件名的规则中或者是静态模式规则中，不用于隐含规则中。另外</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Sysv 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对规则依赖的处理也不尽相同。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Sysv 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对规则的依赖进行两次替换展开，而</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GUN 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对依赖列表的处理只有一次，对其中的变量和函数引用直接进行展开。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
自动化变量的这个古怪的特性完全是为了兼容</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Sysv
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。在使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">GNU 
make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">时可以不考虑这个，也可以在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用伪目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.POSIX</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来禁止这一特性。</span></p>
<h3><a name="_gnu_make_10.5.4"><span lang="en-us">1</span><span lang="EN-US">0.5.4<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">模式的匹配</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
通常，模式规则中目标模式由前缀、后缀、模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”组成，这三个部分允许两个同时为空。实际文件名应该是以模式指定的前缀开始、后缀结束的任何文件名。文件名中除前缀和后缀以外的所有部分称之为“茎”（模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可以代表若干字符。因此：模式“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”所匹配的文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">test.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”中“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">test</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”就是“茎”）。模式规则中依赖文件名的确定过程是：首先根据规则定义的目标模式匹配实际的目标文件，确定“茎”，之后使用</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“茎”替代规则依赖文件名中的模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，生成依赖文件名。这样就产生了一个明确指定了目标和依赖文件的规则。例如模式规则：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.o 
: %.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，当“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">test.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”需要重建时将形成规则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">test.o 
: test.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当目标模式中包含斜杠（目录部分）。在进行目标文件匹配时，文件名中包含的目录字符串在匹配之前被移除，只进行基本文件名的匹配；匹配成功后，再将目录部分加入到匹配之后的字符串之前形成“茎”。来看一个例子：例如目标模式为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">e%t</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/eat</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”匹配这个模式，那么“茎”就是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”；模式规则中依赖文件的产生：首先使用“茎”中的非目录部分（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">a</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）替代依赖文件中的模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，之后再将目录部分（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）加入到形成的依赖文件名之前构成依赖文件的全路径名。这里如果模式规则的依赖模式为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">c%r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，则那么目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/eat</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”对应的依赖文件就为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/car</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<h3><a name="_gnu_make_10.5.5"><span lang="en-us">1</span><span lang="EN-US">0.5.5<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">万用规则</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当模式规则的目标只是一个模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（它可以匹配任何文件名）时，我们称这个规则为万用规则。万用规则在书写</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">时非常有用，但它会影响</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的执行效率，因为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在执行时将会使用万用规则来试图重建其它规则的目标和依赖文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
假如在一个存在万用规则的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中提及了文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。为了创建这个目标，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会试图使用以下规则来创建这个目标：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">对一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”进行链接并产生文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">编译和连接程器由文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来创建这个文件；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">3.
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
编译并链接</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">程序“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来创建；等等。总之</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会试图使用所有可能的隐含规则来完成对这个文件的创建。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
当然，我们很清楚以上这样的过程是没有必要的，我们知道“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”是一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">原文件，而不是一个可执行程序。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">在执行时都会试图根据可能的隐含规则来创建这个文件，但由于其依赖的文件（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”等）不存在，最终这些可能的隐含规则都会被否定。但是如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中存在一个万用规则，那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行时所要考虑的情况就比较复杂，也很多（它会试图功过隐含规则来创建那些依赖文件，虽然最终这些文件不可能被创建，也无从创建），从而导致</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的执行效率会很低。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
为了避免万用规则带来的效率问题，我们可以对万用规则的使用加以限制。通常有两种方式，需要在定义一个万用规则时对其进行限制。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
将万用规则设置为最终规则，定义时使用双冒号规则。作为最终规则，此规则只有在它的依赖文件存在时才能被应用，即使它的依赖可以由隐含规则创建也不行。就是说，最终规则中没有进一步的“链”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
例如，从</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">RCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">SCCS</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件中提取源文件的内嵌隐含规则就是一个最终规则。因此如果文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c,v</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”不存在，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">就不会试图从一个中间文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c,v.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">RCS/SCCS/s.foo.c,v</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来创建它。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
RCS </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
和</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"> 
SCCS </span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
文件一般都是最终的源文件，它不能由其它任何文件重建；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">可以记录它的时间戳，但不会寻找重建它们的方式。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm; margin-left: 36.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果万用规则没有定义为最终规则，那么它就是一个非最终规则。非最终的万用规则不会被用来创建那些符合某一个明确模式规则的目标和依赖文件。就是说如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中存在匹配此文件的模式规则（非万用规则），那么对于这个文件来说其重建规则只会是它所匹配的这个模式，而不是这个非最终的万用规则。例如，文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中同时存在一个万用规则和模式规则</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.c 
: %.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（该规则运行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Yacc</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）。无论该规则是否会被使用（如果存在文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，那么规则将被执行）。那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">试图重建“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的规则都是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.c 
: %.y</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，而不是万用规则。这样做是为了避免</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">执行时试图使用非最终的万用规则来重建文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的情况发生。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
定义一个特殊的内嵌哑模式规则给出如何重建某一类文件，避免使用非最终万用规则。哑模式规则没有依赖，也没有命令行，在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的其它场合被忽略。例如，内嵌的哑模式规则：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.p 
:</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”为</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Pascal</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源程序如“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”指定了重建规则（规则不存在依赖文件、也不存在任何命令），这样就避免了</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">试图“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.p</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”而去寻找“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.p.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.p.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的过程。</span><span style="font-size: 12.0pt; line-height: 150%; color: black">
</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
我们可以为所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">可识别的后缀创建一个形如“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%.p 
:</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的哑模式规则。</span></p>
<h3><a name="_gnu_make_10.5.6"><span lang="en-us">1</span><span lang="EN-US">0.5.6<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style="font-family: 楷体_GB2312">重建内嵌隐含规则</span></a></h3>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一个隐含规则，我们可以对它进行重建。重建一个隐含规则时，需要使用相同的目标和依赖模式，命令可以不同（重新指定规则的命令）。这样就可以替代有相同目标和依赖的那个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">内嵌规则，替代之后隐含规则可能被使用的顺序由它在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中的位置决定。例如通常</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中可能会包含这样一个规则：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%.o : %.c</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">$(CC) $(CFLAGS) 
CD__DEBUG__&nbsp; $&lt; -o $@</span></i></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="SV" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
它替代了编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的内嵌隐含规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
也可以取消一个内嵌的隐含规则。同样需要定义一个和隐含规则具有相同目标和依赖的规则，但这个规则没有命令行。例如下边的这个规则取消了编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.s</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件的内嵌规则。</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial; color: black">
&nbsp;&nbsp; </span><b><i><span lang="SV" style="font-size: 12.0pt; font-family: Arial">
&nbsp;%.o : %.s</span></i></b></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">&nbsp;</span></p>
<h2><a name="_gnu_make_10.6"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.6<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">缺省规则</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
有时</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会需要一个缺省的规则，在执行过程中无法为一个文件找到合适的重建规则（在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中没有给出重建它的明确规则，同时也没有合适可用的隐含规则）。那么</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">就使用这个规则来重建它。就是说，当所需要的重建的目标文件没有可用的命令时、就执行这个缺省规则命令。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
这样一个规则，我们可以使用最终万用规则。例如：调试</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">时（可能一些源文件还没有完成），我们关心的是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中所有的规则是否可正确执行，而源文件的具体内容却不需要关心。基于这一点我们就可以使用空文件（和源文件同名的文件），在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中定义这样一个规则：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">%::</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">touch $@</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
执行</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">过程中，对所有不存在的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件将会使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">touch</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”命令创建这样一个空的源文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
实现一个缺省规则的方式也可以不使用万用规则，而使用伪目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.DEFAULT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。上边的例子也可以这样实现：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">.DEFAULT :</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">touch $@</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
需要注意：没有指定命令行的伪目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.DEFAULT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，含义是取消前边所有使用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.DEFAULT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”指定的缺省执行命令。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
同样，也可以让这个缺省的规则不执行任何命令（给它定义个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">一个空命令</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
另外缺省规则也可用来实现在一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中重载另一个</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。</span></p>
<h2><a name="_gnu_make_10.7"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.7<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">后缀规则</span></a></h2>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
后缀规则是一种古老定义隐含规则的方式，在新版本的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中使用模式规则作为对它的替代，模式规则相比后缀规则更加清晰明了。在现在版本中保留它的原因是为了能够兼容旧的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件。后缀规则有两种类型：“双后缀”和“单后缀”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
双后缀规则定义一对后缀：目标文件的后缀和依赖目标的后缀。它匹配所有后缀为目标后缀的文件。对于一个匹配的目标文件，它的依赖文件这样形成：将匹配的目标文件名中的后缀替换为依赖文件的后缀得到。如：一个描述目标和依赖后缀的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的规则就等价于模式规则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%o 
: %c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
单后缀规则只定义一个后缀：此后缀是源文件名的后缀。它可以匹配任何文件，其依赖文件这样形成：将后缀直接追加到目标文件名之后得到。例如：单后缀“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”就等价于模式规则“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">% 
: %.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
判断一个后缀规则是单后缀还是双后缀的过程：判断后缀规则的目标，如果其中只存在一个可被</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">识别的后缀，则规则是一个“单后缀”规则；当规则目标中存在两个可被</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">识别的后缀时，这个规则就是一个“双后缀”规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
例如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”都是</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">可识别的后缀。因此当定义了一个目标是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的规则时。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">会将它作为一个双后缀规则来处理，它的含义是所有“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件的依赖文件是对应的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”文件。下边是使用后追规则定义的编译</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">源文件的规则：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">.c.o:</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">$(CC) -c $(CFLAGS) 
$(CPPFLAGS) -o $@ $&lt;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
注意：一个后缀规则中不存在任何依赖文件。否则，此规则将被作为一个普通规则对待。因此规则：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">.c.o: foo.h</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">$(CC) -c $(CFLAGS) 
$(CPPFLAGS) -o $@ $&lt;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
就不是一个后缀规则。它是一个目标文件为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.c.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”、依赖文件是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.h</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的普通规则。它也不等价于规则：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">%.o: %.c foo.h</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 58.2pt"><b><i>
<span lang="SV" style="font-size: 12.0pt; font-family: Arial">$(CC) -c $(CFLAGS) 
$(CPPFLAGS) -o $@ $&lt;</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
需要注意的是：没有命令行的后缀规则是没有任何意义的。它和没有命令行的模式规则不同，它也不能取消之前使用后追规则定义的规则。它所实现的仅仅是将这个后缀规则作为目标加入到</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的数据库中。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
可识别的后缀指的是特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SUFFIXES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”所有依赖的名字。通过给特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">SUFFIXES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”添加依赖来增加一个可被识别的后缀。像下边这样：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">.SUFFIXES: 
.hack .win</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
它所实现的功能是把后缀“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.hack</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.win</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”加入到可识别后缀列表的末尾。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果需要重设默认的可识别后缀，因该这样来实现：</span></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">
.SUFFIXES:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #</span><span style="font-size: 12.0pt; font-family: 楷体_GB2312">删除所有已定义的可识别后缀</span></i></b></p>
<p class="MsoNormal" style="text-indent: 13.85pt; margin-left: 29.95pt"><b><i>
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">.SUFFIXES: .c 
.o .h&nbsp;&nbsp; #</span><span style="font-size: 12.0pt; font-family: 楷体_GB2312">重新定义</span></i></b></p>
<p class="MsoNormal" style="text-indent: 20.5pt">
<span lang="EN-US" style="font-size: 12.0pt; font-family: Arial">&nbsp;</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: 0cm">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
首先使用没有依赖的特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SUFFIXES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来删除所有已定义的可识别后缀；之后再重新定义。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
注意：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-r</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">-no-builtin-rules</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”可以清空所有已定义的可识别后缀。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">读取所有的</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">文件之前，变量“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">SUFFIXE</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”被定义为默认的可识别后缀列表。虽然存在这样一个变量，但是请不要通过修改这个变量值的方式来改变可识别的后缀列表，应该使用特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.SUFFIXES</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”来实现。</span></p>
<h2><a name="_gnu_make_10.8"><span style="font-size: 14pt" lang="en-us"><b>1</b></span><b><span lang="EN-US" style="font-size: 14.0pt">0.8<span style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 7.0pt; font-family: Times New Roman">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><span style="font-size: 14.0pt; font-family: 楷体_GB2312">
隐含规则搜索算法</span></a></h2>
	<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: #222222">
	<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
	<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
	对于目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">为它搜索隐含规则的算法如下。此算法适合于：</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.
	</span>
	<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
	任何没有命令行的双冒号规则；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.
	</span>
	<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
	任何没有命令行的普通规则；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">3.
	</span>
	<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
	那些不是任何规则的目标、但它是另外某些规则的依赖文件；</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">4.
	</span>
	<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
	在递归搜索过程中，隐含规则链中前一个规则的依赖文件。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在搜索过程中没有提到后缀规则，因为所有的后缀规则在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">读取</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">时，都被转换为对应的模式规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
对于形式为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ARCHIVE(MEMBER)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的目标，下边的算法会执行两次，第一次的目标是整个目标名“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">ARCHIVE(MEMBER)</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”），如果搜索失败，进行第二次搜索，第二次以“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">member</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”作为目标来搜索。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
搜索过程如下：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
将目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的目录部分分离，分离后目录部分称为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">D</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，其它部分称“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。例如：“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”时，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">D</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">就是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">src/</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”就为“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">foo.o</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
列出所有和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”匹配的模式规则。如果模式规则的目标中包含斜杠，则认为和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”相匹配，否则认为此模式规则和“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”相匹配。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">3.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
只要这个模式规则列表中包含一个非万用规则的规则，那么将列表中所有的非最终万用规则删除。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">4.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
删除这个模式规则列表中的所有没有命令行的规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">5.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
对于这个模式规则列表中的所有规则：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">a)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
计算出模式规则的“茎”</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">，</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">应该是“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”中匹配“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的非空的部分。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">b)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
计算依赖文件。把依赖中的“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”用“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”替换。如果目标模式中不包含斜杠，则把“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">D</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”加在替换之后的每一个依赖文件开头，构成完整的依赖文件名。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">c)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
测试规则的所有依赖文件是否存在或是应该存在（一个文件，如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中它作为一个明确规则的目标，或者依赖文件被提及，我们就说这个文件是一个“应该存在”的文件）。如果所有的依赖文件都存在、应该存在或是这个规则没有依赖。退出查找，使用该规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">6.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
截止到第</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">5</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">步，合适的规则还是没有被找到，进一步搜索。对于这个模式规则列表中的每一规则：</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">a)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果规则是一个终止规则，则忽略它，继续下一条模式规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">b)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
计算依赖文件（同第</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">5</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">步）。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">c)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
测试此规则的依赖文件是否存在或是应该存在。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">d)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
对于此规则中不存在的依赖文件，递归的调用这个算法查找它是否可由隐含规则来创建。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 71.25pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">e)<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果所有的依赖文件存在、应该存在、或是它可以由一个隐含规则来创建。退出查找，使用该规则。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent: -21.0pt; margin-left: 39.0pt">
<span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">7.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
如果没有隐含规则可以创建这个规则的依赖文件，则执行特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">.DEFAULT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”所指定的命令（可以创建这个文件，或者给出一个错误提示）。如果在</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">Makefile</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">中没有定义特殊目标“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">DEFAULT</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，就没有可用的命令来完成“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的创建。</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">make</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">退出。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
一旦为一类目标查找到合适的模式规则。除匹配“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”或者“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">N</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的模式以外，对其它模式规则中的目标模式进行配置，使用“茎”</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">S</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">替换其中的模式字符“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">%</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”，将得到的文件名保存直到执行命令更新这个目标文件（“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”）。在命令执行以后，把每一个储存的文件名放入数据库，并且标志为已更新，其时间戳和文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”相同。</span></p>
<p class="MsoBodyTextFirstIndent" style="text-indent:24.0pt">
<span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">
在执行更新文件“</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black">T</span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">”的命令时，使用</span><span lang="EN-US" style="font-size: 12.0pt; line-height: 150%; color: black"><span lang="EN-US" style="font-family: 楷体_GB2312">自动化变量</span></span><span style="font-size: 12.0pt; line-height: 150%; font-family: 楷体_GB2312; color: black">表示规则中的依赖文件和目标文件。</span></p>
	<hr size="1" width="100%" align="center">

	<span style="font-size: 12.0pt; font-family: Arial; ">
	<p class="MsoNormal" style="text-align: justify; text-justify: inter-ideograph; text-indent: 24.0pt; line-height: 150%; text-autospace: ideograph-numeric ideograph-other">
	<font face="楷体_GB2312" size="4"><a href="make-11.html">下一章</a>
	<a href="make-09.html">上一章</a> <a href="index.html#content">目录</a></font></p>
	</span>

</body>

</html>
